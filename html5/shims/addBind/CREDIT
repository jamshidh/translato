
This code is modified from

https://gist.github.com/brettz9/4093766

(which itself is inspired by https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)